<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>일정 추가</title>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<!-- datepicker -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet"
	href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script type="text/javascript">
	$(function() {
		$.datepicker.setDefaults({
			dateFormat : 'yy-mm-dd',
			showOtherMonths : true,
			showMonthAfterYear : true,
			changeYear : true,
			changeMonth : true,
			yearSuffix : "년",
			monthNamesShort : [ '1', '2', '3', '4', '5', '6', '7', '8', '9',
					'10', '11', '12' ],
			monthNames : [ '1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월',
					'9월', '10월', '11월', '12월' ],
			dayNamesMin : [ '일', '월', '화', '수', '목', '금', '토' ],
			dayNames : [ '일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일' ]
		});
		$("#startDt").datepicker();
		$("#endDt").datepicker();
		$("#startDt").datepicker('setDate', 'today');
		$("#endDt").datepicker('setDate', 'today');
	});

	$.fn.serializeObject = function() {
		var o = {};
		var a = this.serializeArray();
		$.each(a, function() {
			var name = $.trim(this.name), value = $.trim(this.value);
			if (o[name]) {
				if (!o[name].push) {
					o[name] = [ o[name] ];
				}
				o[name].push(value || '');
			} else {
				o[name] = value || '';
			}
		});
		return o;
	};

	function click_ok() {
		var scheduleData = JSON.stringify($('form#scheduleData').serializeObject());

		$.ajax({
			data : scheduleData,
			url : "/addSchedule",
			type : "POST",
			dataType : "json",
			contentType : "application/json; charset=UTF-8",
			success : function(data) {
				opener.parent.location.reload();
				window.close();
			}
		});
	};
</script>
</head>
<body>
	<div class="group" id="popupGroup">
		<div class="group-head">
			<h1 class="zTree-h1">일정 추가</h1>
		</div>
		<hr>
		<div class="group-body">
			<form id="scheduleData">
				<div class="domain">
					<h3 class="zTree-h3">내용</h3>
				</div>
				<div class="top">
					<input class="content" id="content" type="text" name="content"
						placeholder="스케줄을 입력해주세요">
				</div>
				<div class="domain">
					<h3 class="zTree-h3">시작일자</h3>
				</div>
				<div class="domain">
					<input class="date" id="startDt" type="text" name="startDt"
						id="startDate">
				</div>
				<div class="domain">
					<h3 class="zTree-h3">종료일자</h3>
				</div>
				<div class="domain">
					<input class="date" id="endDt" type="text" name="endDt"
						id="endDate">
				</div>
			</form>
			<button class="btn btn-outline-info" type="button" onclick="click_ok();">확인</button>
		</div>
	</div>
</body>
</html>

